<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Dr. Labs</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(to bottom right, lightblue, lightgreen);
        padding: 20px;
    }
    h1 { text-align: center; }
    .section {
        background: white;
        padding: 15px;
        margin: 10px auto;
        border-radius: 8px;
        max-width: 600px;
    }
    input, button {
        padding: 8px;
        margin: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }
    button {
        background: #007BFF;
        color: white;
        cursor: pointer;
        border: none;
    }
    button:hover {
        background: #0056b3;
    }
</style>
</head>
<body>
    <h1>Admin Dashboard</h1>

    <div class="section">
        <h3>Create Agent Credential</h3>
        <input type="text" id="agentUser" placeholder="Agent Username">
        <input type="text" id="agentPass" placeholder="Agent Password">
        <button onclick="createAgent()">Submit</button>
    </div>

    <div class="section">
        <h3>Create Technician Details</h3>
        <input type="text" id="techName" placeholder="Technician Name">
        <input type="text" id="techId" placeholder="Employee ID">
        <input type="text" id="techLoc" placeholder="Location">
        <button onclick="createTechnician()">Submit</button>
    </div>

    <div class="section">
        <h3>Create Test</h3>
        <input type="text" id="testName" placeholder="Test Name">
        <input type="number" id="testCost" placeholder="Cost">
        <input type="text" id="testCode" placeholder="Code">
        <button onclick="createTest()">Submit</button>
    </div>

    <div class="section">
        <h3>Create Package</h3>
        <input type="text" id="pkgName" placeholder="Package Name">
        <input type="number" id="pkgCost" placeholder="Cost">
        <input type="text" id="pkgCode" placeholder="Code">
        <button onclick="createPackage()">Submit</button>
    </div>

    <div class="section">
        <h3>Create Discount</h3>
        <input type="text" id="discountVal" placeholder="e.g., 10%">
        <button onclick="createDiscount()">Submit</button>
    </div>

    <br>
    <button onclick="logout()">Logout</button>
    <button onclick="location.href='index.html'">Back</button>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxBJHuzAe1EN6npzN-1W6Uc-azhf8-qkm3D6swOqeY3tiNgvXe9wBnA9eI4mPYntS26kw/exec"; // Update with your deployed Apps Script URL

if (!sessionStorage.getItem("isAdmin")) {
    location.href = "admin_login.html";
}

function createAgent() {
    const user = document.getElementById("agentUser").value.trim();
    const pass = document.getElementById("agentPass").value.trim();
    if (!user || !pass) return alert("Enter all fields");
    fetch(`${WEB_APP_URL}?action=createAgent&username=${encodeURIComponent(user)}&password=${encodeURIComponent(pass)}`)
    .then(r => r.json())
    .then(res => alert(res.message || "Agent created"));
}

function createTechnician() {
    const name = document.getElementById("techName").value.trim();
    const id = document.getElementById("techId").value.trim();
    const loc = document.getElementById("techLoc").value.trim();
    if (!name || !id || !loc) return alert("Enter all fields");
    fetch(`${WEB_APP_URL}?action=createTechnician&name=${encodeURIComponent(name)}&empId=${encodeURIComponent(id)}&location=${encodeURIComponent(loc)}`)
    .then(r => r.json())
    .then(res => alert(res.message || "Technician created"));
}

function createTest() {
    const name = document.getElementById("testName").value.trim();
    const cost = document.getElementById("testCost").value.trim();
    const code = document.getElementById("testCode").value.trim();
    if (!name || !cost || !code) return alert("Enter all fields");
    fetch(`${WEB_APP_URL}?action=createTest&name=${encodeURIComponent(name)}&cost=${encodeURIComponent(cost)}&code=${encodeURIComponent(code)}`)
    .then(r => r.json())
    .then(res => alert(res.message || "Test created"));
}

function createPackage() {
    const name = document.getElementById("pkgName").value.trim();
    const cost = document.getElementById("pkgCost").value.trim();
    const code = document.getElementById("pkgCode").value.trim();
    if (!name || !cost || !code) return alert("Enter all fields");
    fetch(`${WEB_APP_URL}?action=createPackage&name=${encodeURIComponent(name)}&cost=${encodeURIComponent(cost)}&code=${encodeURIComponent(code)}`)
    .then(r => r.json())
    .then(res => alert(res.message || "Package created"));
}

function createDiscount() {
    const val = document.getElementById("discountVal").value.trim();
    if (!val) return alert("Enter discount value");
    fetch(`${WEB_APP_URL}?action=createDiscount&value=${encodeURIComponent(val)}`)
    .then(r => r.json())
    .then(res => alert(res.message || "Discount created"));
}

function logout() {
    sessionStorage.removeItem("isAdmin");
    location.href = "admin_login.html";
}
</script>
</body>
</html>
