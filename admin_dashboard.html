<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Dr. Labs</title>
<style>
    body { font-family: Arial; background: linear-gradient(to bottom right, lightblue, lightgreen); padding: 20px; }
    h1 { text-align: center; }
    .section { background: white; padding: 15px; margin: 20px auto; border-radius: 8px; width: 90%; }
    input, select, button { margin: 5px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #007BFF; color: white; border: none; cursor: pointer; }
    button:hover { background: #0056b3; }
</style>
</head>
<body>
<h1>Admin Dashboard</h1>
<div><button onclick="logout()">Logout</button></div>

<div class="section">
    <h3>Create Agent</h3>
    <input id="agentName" placeholder="Agent Username">
    <input id="agentPass" placeholder="Agent Password">
    <button onclick="createAgent()">Create Agent</button>
</div>

<div class="section">
    <h3>Create Technician</h3>
    <input id="techName" placeholder="Technician Name">
    <input id="techId" placeholder="Employee ID">
    <input id="techLoc" placeholder="Location">
    <button onclick="createTechnician()">Create Technician</button>
</div>

<div class="section">
    <h3>Add Test</h3>
    <input id="testName" placeholder="Test Name">
    <input id="testCost" placeholder="Cost">
    <input id="testCode" placeholder="Code">
    <button onclick="createTest()">Add Test</button>
</div>

<div class="section">
    <h3>Add Package</h3>
    <input id="pkgName" placeholder="Package Name">
    <input id="pkgCost" placeholder="Cost">
    <input id="pkgCode" placeholder="Code">
    <button onclick="createPackage()">Add Package</button>
</div>

<div class="section">
    <h3>Add Discount</h3>
    <input id="discountValue" placeholder="Discount %">
    <button onclick="createDiscount()">Add Discount</button>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzCR-SayJVb0CUqY6UvGZlHdF0ZvfBejMR2qDndRI8dEVP1Lofq3BYnBkWpMl35pVyudg/exec"; // Replace with your Web App URL
if (!sessionStorage.getItem("adminUser")) {
    window.location.href = "admin_login.html";
}

function logout() {
    sessionStorage.removeItem("adminUser");
    window.location.href = "admin_login.html";
}

function createAgent() {
    const name = document.getElementById("agentName").value;
    const pass = document.getElementById("agentPass").value;
    fetch(`${WEB_APP_URL}?action=createAgent&username=${encodeURIComponent(name)}&password=${encodeURIComponent(pass)}`)
    .then(r=>r.json()).then(d=>alert(d.message));
}

function createTechnician() {
    fetch(`${WEB_APP_URL}?action=createTechnician&name=${encodeURIComponent(document.getElementById("techName").value)}&id=${encodeURIComponent(document.getElementById("techId").value)}&location=${encodeURIComponent(document.getElementById("techLoc").value)}`)
    .then(r=>r.json()).then(d=>alert(d.message));
}

function createTest() {
    fetch(`${WEB_APP_URL}?action=createTest&name=${encodeURIComponent(document.getElementById("testName").value)}&cost=${encodeURIComponent(document.getElementById("testCost").value)}&code=${encodeURIComponent(document.getElementById("testCode").value)}`)
    .then(r=>r.json()).then(d=>alert(d.message));
}

function createPackage() {
    fetch(`${WEB_APP_URL}?action=createPackage&name=${encodeURIComponent(document.getElementById("pkgName").value)}&cost=${encodeURIComponent(document.getElementById("pkgCost").value)}&code=${encodeURIComponent(document.getElementById("pkgCode").value)}`)
    .then(r=>r.json()).then(d=>alert(d.message));
}

function createDiscount() {
    fetch(`${WEB_APP_URL}?action=createDiscount&value=${encodeURIComponent(document.getElementById("discountValue").value)}`)
    .then(r=>r.json()).then(d=>alert(d.message));
}
</script>
</body>
</html>
