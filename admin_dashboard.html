<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Dr. Labs</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:linear-gradient(135deg,lightblue,lightgreen);margin:0;padding:18px}
  header{display:flex;justify-content:space-between;align-items:center;background:#007bff;color:#fff;padding:12px;border-radius:8px}
  .container{max-width:900px;margin:18px auto}
  .card{background:#fff;padding:12px;border-radius:8px;margin-bottom:12px}
  input,select,button,textarea{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:1px solid #ccc}
  button{background:#007bff;color:#fff;border:0;padding:10px;border-radius:6px;cursor:pointer}
  .small{display:flex;gap:8px}
  .logout{background:#dc3545}
</style>
</head>
<body>
  <header>
    <div>Admin Dashboard â€” Dr. Labs</div>
    <div>
      <span id="adminName">Admin</span>
      <button class="logout" onclick="logout()">Logout</button>
    </div>
  </header>

  <div class="container">
    <div class="card">
      <h3>Create Agent Credential</h3>
      <input id="agentU" placeholder="Username">
      <input id="agentP" placeholder="Password">
      <input id="agentN" placeholder="Full Name">
      <button onclick="createAgent()">Create Agent</button>
    </div>

    <div class="card">
      <h3>Create Technician</h3>
      <input id="techN" placeholder="Technician Name">
      <input id="techE" placeholder="Employee ID">
      <input id="techL" placeholder="Location">
      <button onclick="createTechnician()">Create Technician</button>
    </div>

    <div class="card">
      <h3>Create Test</h3>
      <input id="testN" placeholder="Test Name">
      <input id="testC" placeholder="Cost">
      <input id="testCode" placeholder="Code">
      <button onclick="createTest()">Create Test</button>
    </div>

    <div class="card">
      <h3>Create Package</h3>
      <input id="pkgN" placeholder="Package Name">
      <input id="pkgC" placeholder="Cost">
      <input id="pkgCode" placeholder="Code">
      <button onclick="createPackage()">Create Package</button>
    </div>

    <div class="card">
      <h3>Create Discount</h3>
      <input id="discV" placeholder="Discount (e.g. 10%)">
      <button onclick="createDiscount()">Create Discount</button>
    </div>
  </div>

<script>
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbyKsG28Vso10fvXim3w9aAEnOwS5GO3IIoxSyUSOZyrG4U1DcDbyfUraYhTPzleNJrTgA/exec'; // replace after deploy
document.getElementById('adminName').innerText = localStorage.getItem('adminName') || 'Admin';

function post(action, params){
  return fetch(WEB_APP_URL + '?action=' + action + '&' + new URLSearchParams(params)).then(r=>r.json());
}

function createAgent(){
  const username = document.getElementById('agentU').value.trim();
  const password = document.getElementById('agentP').value.trim();
  const name = document.getElementById('agentN').value.trim();
  if(!username||!password||!name) return alert('Fill all fields');
  post('createAgentCredential',{ username, password, name }).then(j=>{ if(j.success){ alert('Agent created'); } else alert('Failed'); });
}

function createTechnician(){
  const name = document.getElementById('techN').value.trim();
  const empId = document.getElementById('techE').value.trim();
  const location = document.getElementById('techL').value.trim();
  if(!name) return alert('Fill technician name');
  post('createTechnician',{ name, empId, location }).then(j=> j.success ? alert('Technician created') : alert('Failed'));
}

function createTest(){
  const name = document.getElementById('testN').value.trim();
  const cost = document.getElementById('testC').value.trim();
  const code = document.getElementById('testCode').value.trim();
  if(!name) return alert('Fill test name');
  post('createTest',{ name, cost, code }).then(j=> j.success ? alert('Test added') : alert('Failed'));
}

function createPackage(){
  const name = document.getElementById('pkgN').value.trim();
  const cost = document.getElementById('pkgC').value.trim();
  const code = document.getElementById('pkgCode').value.trim();
  if(!name) return alert('Fill package name');
  post('createPackage',{ name, cost, code }).then(j=> j.success ? alert('Package added') : alert('Failed'));
}

function createDiscount(){
  const d = document.getElementById('discV').value.trim();
  if(!d) return alert('Fill discount');
  post('createDiscount',{ discount: d }).then(j=> j.success ? alert('Discount added') : alert('Failed'));
}

function logout(){ localStorage.removeItem('adminName'); location.href='index.html'; }
</script>
</body>
</html>
